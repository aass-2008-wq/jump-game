<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©</title>

<style>
  body {
    margin: 0;
    background: #2c2c2c;
    font-family: "Cairo", sans-serif;
  }

  #game {
    width: 100vw;
    height: 100vh;
    background: linear-gradient(#000, #4b3800);
    position: relative;
    overflow: hidden;
  }

  /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
  #startScreen {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: gold;
    z-index: 999;
  }

  #startScreen button {
    padding: 15px 35px;
    background: gold;
    border: none;
    border-radius: 10px;
    font-size: 26px;
    font-weight: bold;
    cursor: pointer;
  }

  /* Ø§Ù„Ù„Ø§Ø¹Ø¨ */
  #player {
    width: 90px;
    height: 90px;
    background-image: url("https://i.imgur.com/z4d4K4R.png");
    background-size: cover;
    position: absolute;
    bottom: 0;
    left: 60px;
  }

  /* Ø§Ù„Ø¹Ù‚Ø¨Ø© */
  #obstacle {
    width: 55px;
    height: 55px;
    background: black;
    border: 3px solid gold;
    border-radius: 10px;
    position: absolute;
    bottom: 0;
    right: -120px;
    animation: move 2.2s linear infinite;
  }

  @keyframes move {
    0% { right: -120px; }
    100% { right: 110%; }
  }

  #score {
    position: absolute;
    top: 10px;
    left: 10px;
    color: gold;
    font-size: 28px;
    z-index: 5;
  }

  #restartBtn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 15px 30px;
    background: gold;
    border: none;
    font-size: 24px;
    border-radius: 10px;
    display: none;
    z-index: 1000;
    cursor: pointer;
  }
</style>

</head>
<body>

<div id="game">

  <div id="startScreen">
    <h1>Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©</h1>
    <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
  </div>

  <div id="player"></div>
  <div id="obstacle"></div>

  <div id="score">Ø§Ù„Ù†ØªÙŠØ¬Ø©: 0</div>

  <button id="restartBtn" onclick="restart()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>

</div>

<audio id="jumpSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_b753b7ec45.mp3"></audio>

<script>

let jumping = false;
let score = 0;
let speed = 2.2;
let gameRunning = false;

let player = document.getElementById("player");
let obstacle = document.getElementById("obstacle");
let scoreText = document.getElementById("score");
let restartBtn = document.getElementById("restartBtn");
let jumpSound = document.getElementById("jumpSound");
let startScreen = document.getElementById("startScreen");

function startGame() {
  startScreen.style.display = "none";
  gameRunning = true;
}

function restart() {
  location.reload();
}

function jump() {
  if (!gameRunning || jumping) return;
  jumping = true;

  jumpSound.play();

  let up = 0;

  let interval = setInterval(() => {
    if (up >= 130) {
      clearInterval(interval);

      let downInterval = setInterval(() => {
        if (up <= 0) {
          clearInterval(downInterval);
          jumping = false;
        }
        up -= 6;
        player.style.bottom = up + "px";
      }, 20);

    }
    up += 6;
    player.style.bottom = up + "px";
  }, 20);
}

document.addEventListener("keydown", jump);
document.addEventListener("touchstart", jump);

setInterval(() => {
  if (!gameRunning) return;

  let p = player.getBoundingClientRect();
  let o = obstacle.getBoundingClientRect();

  if (
    p.right > o.left &&
    p.left < o.right &&
    p.bottom > o.top
  ) {
    gameRunning = false;
    restartBtn.style.display = "block";
    alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!\nÙ†ØªÙŠØ¬ØªÙƒ: " + score + "\nðŸ“¸ ØµÙˆÙ‘Ø± Ø¯Ø±Ø¬ØªÙƒ!");
  }
}, 20);

obstacle.addEventListener("animationiteration", () => {
  if (!gameRunning) return;

  score++;
  scoreText.textContent = "Ø§Ù„Ù†ØªÙŠØ¬Ø©: " + score;
});

</script>

</body>
</html>
