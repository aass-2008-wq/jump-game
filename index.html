<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¡ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: "Cairo", sans-serif;
    background: #111;
    color: #fff;
  }

  #game {
    width: 100vw;
    height: 100vh;
    background: linear-gradient(#1a1a1a, #3b2a00);
    position: relative;
    overflow: hidden;
  }

  /* Ø´Ø±ÙŠØ· Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© */
  #hud {
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 15px;
    box-sizing: border-box;
    background: rgba(0, 0, 0, 0.4);
    z-index: 3;
  }

  #title {
    font-size: 18px;
    color: gold;
    font-weight: bold;
  }

  #score {
    font-size: 20px;
    color: gold;
    font-weight: bold;
  }

  /* Ø§Ù„Ø£Ø±Ø¶ */
  #ground {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 80px;
    background: #201500;
    border-top: 3px solid gold;
  }

  /* Ø§Ù„Ù„Ø§Ø¹Ø¨ â€“ Ø¯Ø§Ø¦Ø±Ø© Ø°Ù‡Ø¨ÙŠØ© ÙÙŠÙ‡Ø§ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
  #player {
    width: 70px;
    height: 70px;
    position: absolute;
    bottom: 80px; /* ÙÙˆÙ‚ Ø§Ù„Ø£Ø±Ø¶ */
    left: 40px;
    background: #000;
    border: 3px solid gold;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
  }

  #player span {
    pointer-events: none;
  }

  /* Ø§Ù„Ø¹Ù‚Ø¨Ø© */
  #obstacle {
    width: 40px;
    height: 60px;
    position: absolute;
    bottom: 80px;
    right: -80px;
    background: #000;
    border: 3px solid gold;
    border-radius: 8px;
    animation: move 2s linear infinite;
    animation-play-state: paused; /* ØªØ¨Ø¯Ø£ Ù…ØªÙˆÙ‚ÙØ© */
  }

  @keyframes move {
    0%   { right: -80px; }
    100% { right: 110%; }
  }

  /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© (Ù†ÙØ³ Ø§Ù„Ø´ÙƒÙ„ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§) */
  .overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: gold;
    z-index: 5;
    text-align: center;
    padding: 20px;
    box-sizing: border-box;
  }

  .overlay h1 {
    margin-bottom: 10px;
  }

  .overlay p {
    margin: 5px 0;
  }

  .overlay button {
    margin-top: 20px;
    padding: 12px 30px;
    font-size: 20px;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    background: gold;
    color: #000;
    cursor: pointer;
  }

  #gameOver {
    display: none;
  }
</style>
</head>
<body>

<div id="game">

  <!-- HUD -->
  <div id="hud">
    <div id="title">Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¡ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</div>
    <div id="score">Ø§Ù„Ù†ØªÙŠØ¬Ø©: 0</div>
  </div>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
  <div id="startScreen" class="overlay">
    <h1>Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¡ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</h1>
    <p>Ø§Ø¶ØºØ· Ø²Ø± "Ø§Ø¨Ø¯Ø£" Ø«Ù… Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø£Ùˆ Ø²Ø± Ø§Ù„Ù…Ø³Ø§ÙØ© Ù„Ù„Ù‚ÙØ².</p>
    <p>ØªØ¬Ù†Ù‘Ø¨ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ ÙˆØ§Ø¬Ù…Ø¹ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø·.</p>
    <button onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
  </div>

  <!-- Ø´Ø§Ø´Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
  <div id="gameOver" class="overlay">
    <h1>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h1>
    <p id="finalScoreText"></p>
    <p>ğŸ“¸ ØµÙˆÙ‘Ø± Ø¯Ø±Ø¬ØªÙƒ ÙˆØ´Ø§Ø±Ùƒ Ø£ØµØ­Ø§Ø¨Ùƒ!</p>
    <button onclick="restartGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
  </div>

  <!-- Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙˆØ§Ù„Ø¹Ù‚Ø¨Ø© ÙˆØ§Ù„Ø£Ø±Ø¶ -->
  <div id="player"><span>ğŸ§’</span></div>
  <div id="obstacle"></div>
  <div id="ground"></div>

</div>

<script>
  const player     = document.getElementById("player");
  const obstacle   = document.getElementById("obstacle");
  const scoreText  = document.getElementById("score");
  const startScreen = document.getElementById("startScreen");
  const gameOver    = document.getElementById("gameOver");
  const finalScoreText = document.getElementById("finalScoreText");

  let jumping     = false;
  let score       = 0;
  let speed       = 2;      // Ù…Ø¯Ø© Ø­Ø±ÙƒØ© Ø§Ù„Ø¹Ù‚Ø¨Ø©
  let gameRunning = false;

  function startGame() {
    score = 0;
    speed = 2;
    scoreText.textContent = "Ø§Ù„Ù†ØªÙŠØ¬Ø©: 0";
    startScreen.style.display = "none";
    gameOver.style.display = "none";
    gameRunning = true;
    obstacle.style.animationDuration = speed + "s";
    obstacle.style.animationPlayState = "running";
  }

  function restartGame() {
    // Ø±Ø¬ÙˆØ¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù„Ù„Ø£Ø±Ø¶
    player.style.bottom = "80px";
    jumping = false;
    startGame();
  }

  function endGame() {
    gameRunning = false;
    obstacle.style.animationPlayState = "paused";
    finalScoreText.textContent = "Ø¯Ø±Ø¬ØªÙƒ: " + score;
    gameOver.style.display = "flex";
  }

  // Ø­Ø±ÙƒØ© Ø§Ù„Ù‚ÙØ²
  function jump() {
    if (!gameRunning || jumping) return;
    jumping = true;

    let currentBottom = parseInt(window.getComputedStyle(player).bottom); // 80
    let maxJump = currentBottom + 130; // Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù‚ÙØ²Ø©

    let upInterval = setInterval(() => {
      let bottom = parseInt(window.getComputedStyle(player).bottom);
      if (bottom >= maxJump) {
        clearInterval(upInterval);

        // Ù†Ø²ÙˆÙ„
        let downInterval = setInterval(() => {
          let b = parseInt(window.getComputedStyle(player).bottom);
          if (b <= 80) {
            player.style.bottom = "80px";
            clearInterval(downInterval);
            jumping = false;
          } else {
            player.style.bottom = (b - 6) + "px";
          }
        }, 16);
      } else {
        player.style.bottom = (bottom + 6) + "px";
      }
    }, 16);
  }

  // ØªØ­ÙƒÙ…: Ù„Ù…Ø³ Ø£Ùˆ ÙƒÙŠØ¨ÙˆØ±Ø¯
  document.addEventListener("touchstart", jump);
  document.addEventListener("keydown", (e) => {
    if (e.code === "Space" || e.code === "ArrowUp") {
      jump();
    }
  });

  // ÙƒØ´Ù Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù…
  setInterval(() => {
    if (!gameRunning) return;

    const p = player.getBoundingClientRect();
    const o = obstacle.getBoundingClientRect();

    if (
      p.right > o.left &&
      p.left < o.right &&
      p.bottom > o.top &&
      p.top < o.bottom
    ) {
      endGame();
    }
  }, 20);

  // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ø³Ø±Ø¹Ø©
  obstacle.addEventListener("animationiteration", () => {
    if (!gameRunning) return;
    score++;
    scoreText.textContent = "Ø§Ù„Ù†ØªÙŠØ¬Ø©: " + score;

    if (score % 5 === 0) {
      speed -= 0.15;
      if (speed < 0.8) speed = 0.8;
      obstacle.style.animationDuration = speed + "s";
    }
  });
</script>

</body>
</html>
